<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíà C&D Barbershop ‚Äì Black & Gold Edition</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
/* -------------------------------------- */
/* üõ†Ô∏è VARIABLEN & GRUNDSTILE */
/* -------------------------------------- */
:root {
    /* BLACK & GOLD PALETTE */
    --gold: #FFD700;
    --gold-light: #fdd835;
    --gold-shadow: rgba(253, 216, 53, 0.4);
    --bg-dark: #0b0f14; /* DUNKEL: Hintergrundfarbe */
    --card-dark: #0f1720; /* Dunkler f√ºr Karten/Container */
    --text-light: #e6eef6; /* HELL: Textfarbe */
    --muted-text: #9aa6b2; /* Abgedunkelter Text */

    /* Barber Pole Farben (wie im Original-CSS) */
    --pole-red: #c0392b;
    --pole-blue: #2980b9;
    --pole-white: #ecf0f1;

    --max-width: 1200px;
    font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
}
*{box-sizing:border-box}
html,body{height:100%}
body {
    margin:0;
    background-color: var(--bg-dark); /* Fester Hintergrund */
    color:var(--text-light);
    line-height:1.5;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
}
.container{max-width:var(--max-width);margin:0 auto;padding:0 16px}

h2{text-align: center; margin-bottom: 30px; font-weight: 700; color: var(--gold-light); text-shadow: 0 0 10px var(--gold-shadow);}
#successMsg { display: none; margin-top: 20px; color: var(--gold); font-weight: bold; }

/* -------------------------------------- */
/* ‚úÇÔ∏è G√ÑSTEBUCH-SPEZIFISCHE STYLES */
/* -------------------------------------- */

.guestbook-section-custom {
    padding: 0;
    margin: 40px auto;
    background: transparent;
    max-width: var(--max-width); /* Nutze die Variable f√ºr konsistente Breite */
    position: relative;
    box-shadow: none;
    overflow: hidden; /* Wichtig f√ºr die Poles/Icons */
    min-height: 600px; /* Um Platz f√ºr Dekorationen zu schaffen */
}

/* Hintergrundmuster (wie im Bild) */
.guestbook-section-custom::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background:
        /* Zwei goldene Radials (oben links/rechts, wie Lichtflecken) */
        radial-gradient(circle at 10% 10%, rgba(255, 215, 0, 0.04) 0%, transparent 25%),
        radial-gradient(circle at 90% 10%, rgba(255, 215, 0, 0.04) 0%, transparent 25%),
        radial-gradient(circle at 50% 100%, rgba(255, 215, 0, 0.02) 0%, transparent 40%), /* Dezenter Lichtkegel unten */
        /* Feines Gittermuster */
        linear-gradient(to right, rgba(255, 215, 0, 0.015) 1px, transparent 1px) 0 0,
        linear-gradient(to bottom, rgba(255, 215, 0, 0.015) 1px, transparent 1px) 0 0;
    background-size: 20px 20px, 20px 20px, 50px 50px, 50px 50px;
    opacity: 0.8;
    z-index: 1;
}


/* --- Formular Wrapper (Mitte) --- */
.guestbook-main-content {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    z-index: 10;
    padding: 50px 0;
    height: 100%; /* Wichtig f√ºr vertikale Zentrierung der Dekorationen */
}

.guestbook-form-wrapper {
    background: #0d0d0d;
    border: 3px solid var(--gold);
    border-radius: 15px;
    padding: 30px;
    width: 100%;
    max-width: 480px; /* Etwas schmaler f√ºr den Fokus */
    box-shadow: 0 0 40px var(--gold-shadow);
    text-align: center;
    position: relative;
    z-index: 10;
}

.guestbook-form-wrapper .crown-icon {
    font-size: 30px;
    color: var(--gold);
    margin-bottom: 15px;
    text-shadow: 0 0 10px var(--gold-shadow);
}

.guestbook-form-wrapper h3 {
    font-size: 28px;
    margin: 0 0 8px;
    color: var(--gold-light);
    letter-spacing: 1px;
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
}

/* --- Formular Felder und Button --- */
.guestbook-form-wrapper input[type="text"],
.guestbook-form-wrapper textarea {
    width: 100%;
    padding: 12px;
    margin-bottom: 15px;
    background: #222;
    border: 1px solid #444;
    color: #fff;
    border-radius: 8px;
}

/* Submit Button */
.guestbook-form-wrapper .submit-btn {
    /* Exakter Gold-Gradient f√ºr den Button */
    background: linear-gradient(to bottom, var(--gold-light), var(--gold));
    color: #000;
    border: none;
    padding: 12px 30px;
    font-size: 18px;
    font-weight: bold;
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    box-shadow: 0 4px 15px var(--gold-shadow);
    width: 100%;
    max-width: 280px;
    margin-top: 10px;
    letter-spacing: 1px;
}
.guestbook-form-wrapper .submit-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 20px var(--gold-shadow);
}


/* --- Star Rating Style --- */
.star-rating {
    font-size: 30px;
    margin: 20px 0 30px;
    color: #888;
    cursor: pointer;
    display: inline-block;
}
.star-rating span i {
    color: var(--muted-text); /* Grundfarbe (Grau) */
    transition: color 0.2s;
    padding: 0 2px;
}
.star-rating span i.fas {
    color: var(--gold-light); /* Ausgew√§hlte/Hover-Farbe (Gold) */
    text-shadow: 0 0 5px var(--gold-shadow);
}


/* -------------------------------------- */
/* üíà DEKORATION (POLES, SCHERE, K√ñPFE) */
/* -------------------------------------- */

/* Positionierung der dekorativen Icons/SVGs */
.barber-pole, .scissors-drawing, .comb-drawing, .barber-head-drawing {
    position: absolute;
    z-index: 5;
    opacity: 0.9;
    /* Gold-Schatten f√ºr alle dekorativen Elemente */
    filter: drop-shadow(0 0 5px var(--gold-shadow));
}

/* Schere und Kamm Icons (mit Font Awesome) */
.scissors-drawing {
    left: calc(50% - 400px); /* Relative Positionierung zur Mitte */
    top: 50%;
    transform: translateY(-50%) rotate(30deg);
    font-size: 120px; /* Gr√∂sser gemacht */
    color: var(--gold);
    text-shadow: 0 0 15px var(--gold-shadow);
}
.comb-drawing {
    right: calc(50% - 400px); /* Relative Positionierung zur Mitte */
    top: 50%;
    transform: translateY(-50%) scaleX(-1) rotate(-30deg);
    font-size: 120px; /* Gr√∂sser gemacht */
    color: var(--gold);
    text-shadow: 0 0 15px var(--gold-shadow);
}

/* Barber Pole (CSS-Generiert und Animiert) */
.barber-pole {
    width: 90px; /* Etwas breiter */
    height: 300px; /* Etwas h√∂her */
    background: repeating-linear-gradient(
        20deg, /* Leichterer Winkel f√ºr die Streifen */
        var(--pole-white) 0%, var(--pole-white) 15%,
        var(--pole-red) 15%, var(--pole-red) 35%,
        var(--pole-blue) 35%, var(--pole-blue) 55%
    );
    background-size: 100% 120px; /* Wichtig f√ºr die Animation */
    border-radius: 5px;
    overflow: hidden;
    box-shadow: 0 0 20px var(--gold-shadow); /* St√§rkerer Schatten */
    animation: rotatePole 2.5s linear infinite; /* Leichter verlangsamt */
}

@keyframes rotatePole {
    0% { background-position: 0 0; }
    100% { background-position: 0 120px; /* Streifen bewegen sich nach unten */ }
}

.barber-pole::before, .barber-pole::after {
    content: '';
    position: absolute;
    left: 0; width: 100%; height: 25px; /* Etwas h√∂here Kappen */
    background: var(--gold);
    box-shadow: 0 0 12px var(--gold-shadow);
}
.barber-pole::before { top: 0; border-radius: 5px 5px 0 0; }
.barber-pole::after { bottom: 0; border-radius: 0 0 5px 5px; }

.barber-pole.left {
    left: calc(50% - 580px); /* Deutlich weiter links */
    top: 50%;
    transform: translateY(-50%);
}
.barber-pole.right {
    right: calc(50% - 580px); /* Deutlich weiter rechts */
    top: 50%;
    transform: translateY(-50%);
}

/* K√∂pfe: Inline-SVG als Maske */
/* Da ich keine Bilder generieren kann, f√ºge ich hier ein SVG ein, das den Stil im Bild gut trifft */
.barber-head-drawing {
    width: 280px; /* Gr√∂sser gemacht */
    height: 280px;
    opacity: 0.1; /* Sehr dezent halten */
    background-color: var(--gold); /* Farbe der Strichzeichnung */
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    filter: drop-shadow(0 0 8px var(--gold-shadow));
}

.barber-head-drawing.left {
    left: calc(50% - 350px); /* N√§her am Formular */
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><defs><linearGradient id="goldGradient" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:rgb(255,215,0);stop-opacity:1" /><stop offset="100%" style="stop-color:rgb(230,210,0);stop-opacity:1" /></linearGradient></defs><path fill="url(%23goldGradient)" stroke="none" d="M100 10 C60 10 30 50 30 90 C30 130 60 170 100 170 C140 170 170 130 170 90 C170 50 140 10 100 10 Z M100 170 C80 170 60 150 60 130 L60 120 C60 110 70 100 80 100 L120 100 C130 100 140 110 140 120 L140 130 C140 150 120 170 100 170 Z M75 70 C75 60 80 55 85 55 C90 55 95 60 95 70 C95 80 90 85 85 85 C80 85 75 80 75 70 Z M125 70 C125 60 120 55 115 55 C110 55 105 60 105 70 C105 80 110 85 115 85 C120 85 125 80 125 70 Z M70 135 L130 135 C135 135 138 138 138 143 C138 148 135 151 130 151 L70 151 C65 151 62 148 62 143 C62 138 65 135 70 135 Z"/></svg>') no-repeat center / contain;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><defs><linearGradient id="goldGradient" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:rgb(255,215,0);stop-opacity:1" /><stop offset="100%" style="stop-color:rgb(230,210,0);stop-opacity:1" /></linearGradient></defs><path fill="url(%23goldGradient)" stroke="none" d="M100 10 C60 10 30 50 30 90 C30 130 60 170 100 170 C140 170 170 130 170 90 C170 50 140 10 100 10 Z M100 170 C80 170 60 150 60 130 L60 120 C60 110 70 100 80 100 L120 100 C130 100 140 110 140 120 L140 130 C140 150 120 170 100 170 Z M75 70 C75 60 80 55 85 55 C90 55 95 60 95 70 C95 80 90 85 85 85 C80 85 75 80 75 70 Z M125 70 C125 60 120 55 115 55 C110 55 105 60 105 70 C105 80 110 85 115 85 C120 85 125 80 125 70 Z M70 135 L130 135 C135 135 138 138 138 143 C138 148 135 151 130 151 L70 151 C65 151 62 148 62 143 C62 138 65 135 70 135 Z"/></svg>') no-repeat center / contain;
    transform: translateY(-50%) scaleX(-1); /* Spiegeln */
}
.barber-head-drawing.right {
    right: calc(50% - 350px); /* N√§her am Formular */
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><defs><linearGradient id="goldGradient" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:rgb(255,215,0);stop-opacity:1" /><stop offset="100%" style="stop-color:rgb(230,210,0);stop-opacity:1" /></linearGradient></defs><path fill="url(%23goldGradient)" stroke="none" d="M100 10 C60 10 30 50 30 90 C30 130 60 170 100 170 C140 170 170 130 170 90 C170 50 140 10 100 10 Z M100 170 C80 170 60 150 60 130 L60 120 C60 110 70 100 80 100 L120 100 C130 100 140 110 140 120 L140 130 C140 150 120 170 100 170 Z M75 70 C75 60 80 55 85 55 C90 55 95 60 95 70 C95 80 90 85 85 85 C80 85 75 80 75 70 Z M125 70 C125 60 120 55 115 55 C110 55 105 60 105 70 C105 80 110 85 115 85 C120 85 125 80 125 70 Z M70 135 L130 135 C135 135 138 138 138 143 C138 148 135 151 130 151 L70 151 C65 151 62 148 62 143 C62 138 65 135 70 135 Z"/></svg>') no-repeat center / contain;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><defs><linearGradient id="goldGradient" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:rgb(255,215,0);stop-opacity:1" /><stop offset="100%" style="stop-color:rgb(230,210,0);stop-opacity:1" /></linearGradient></defs><path fill="url(%23goldGradient)" stroke="none" d="M100 10 C60 10 30 50 30 90 C30 130 60 170 100 170 C140 170 170 130 170 90 C170 50 140 10 100 10 Z M100 170 C80 170 60 150 60 130 L60 120 C60 110 70 100 80 100 L120 100 C130 100 140 110 140 120 L140 130 C140 150 120 170 100 170 Z M75 70 C75 60 80 55 85 55 C90 55 95 60 95 70 C95 80 90 85 85 85 C80 85 75 80 75 70 Z M125 70 C125 60 120 55 115 55 C110 55 105 60 105 70 C105 80 110 85 115 85 C120 85 125 80 125 70 Z M70 135 L130 135 C135 135 138 138 138 143 C138 148 135 151 130 151 L70 151 C65 151 62 148 62 143 C62 138 65 135 70 135 Z"/></svg>') no-repeat center / contain;
}


/* --- Nachrichten von G√§sten --- */
.messages-overview {
    text-align: center;
    margin-top: 100px;
    position: relative;
    z-index: 10;
}
.messages-overview h3 {
    font-size: 24px;
    margin-bottom: 40px;
    color: var(--gold-light);
    letter-spacing: 1px;
    text-shadow: 0 0 5px var(--gold-shadow);
}
.messages-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    padding: 0 50px;
}
.message-card {
    background: var(--card-dark);
    border: 1px solid rgba(253, 216, 53, 0.2);
    border-radius: 10px;
    padding: 20px;
    text-align: left;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
    transition: transform 0.2s;
}
.message-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 20px rgba(255, 215, 0, 0.2);
}
.message-card .card-header { color: var(--gold-light); }
.message-card .card-info { font-size: 0.9em; color: var(--muted-text); }
.message-card .card-stars i { color: var(--gold-light); font-size: 16px; margin-right: 2px; }

/* -------------------------------------- */
/* üì∏ SOCIAL MEDIA ICON GR√ñSSE (KORRIGIERT) */
/* -------------------------------------- */

.social-links {
    margin: 20px 0;
    text-align: center;
}
.social-links a img {
    width: 24px; /* Von 32px auf 24px reduziert */
    height: 24px; /* Von 32px auf 24px reduziert */
    margin: 0 10px;
    vertical-align: middle;
    border-radius: 50%; /* Sicherstellen, dass es ein Kreis ist */
    box-shadow: 0 0 10px rgba(253, 216, 53, 0.4);
    transition: transform 0.2s;
}
.social-links a img:hover {
    transform: scale(1.2);
}

/* -------------------------------------- */
/* üì± RESPONSIVE ANPASSUNGEN */
/* -------------------------------------- */

@media (max-width: 1280px) {
    /* Anpassungen f√ºr mittelgro√üe Bildschirme */
    .barber-pole.left { left: 20px; margin-left: 0; }
    .barber-pole.right { right: 20px; margin-right: 0; }
    .scissors-drawing { left: 40px; font-size: 80px; }
    .comb-drawing { right: 40px; font-size: 80px; }
    .barber-head-drawing.left { left: 10px; width: 200px; height: 200px; }
    .barber-head-drawing.right { right: 10px; width: 200px; height: 200px; }
}

@media(max-width: 900px){
    /* Dekorationselemente f√ºr Tablets/kleinere Desktops ausblenden */
    .barber-pole, .scissors-drawing, .comb-drawing, .barber-head-drawing { display: none; }
    .messages-grid { padding: 0 20px; }
    .guestbook-section-custom { min-height: auto; } /* Min-Height zur√ºcksetzen wenn Deko weg ist */
}

@media(max-width: 768px){
    /* G√§stebuch: ALLE ILLUSTRATIVEN ELEMENTE auf Handys ausblenden */
    .guestbook-section-custom { min-height: auto; max-width: 100%; }
    .guestbook-form-wrapper { max-width: 100%; margin: 0 10px; padding: 20px; }
    .messages-overview { margin-top: 50px; }
    .messages-grid { grid-template-columns: 1fr; /* Eine Spalte auf Handys */ }
    .container {padding: 0 10px;}
}
</style>
</head>
<body>
<div class="header-banner">
  <img
    src="https://raw.githubusercontent.com/Artonstyle/Barbershop/main/images/Barbershop-logo7.png"
    alt="C&D Barbershop Banner">
</div>
<div class="welcome-section">
  <h1>Willkommen bei C&D Barbershop</h1>
  <p>Sch√∂n, dass Sie hier sind! C&D Barbershop steht f√ºr
Qualit√§t, Stil und Pers√∂nlichkeit. In einer modernen Atmosph√§re bieten
wir individuelle Beratung, trendige Schnitte und hochwertige Pflege ‚Äì
f√ºr Ihr perfektes Haar- und Bartgef√ºhl.</p>
</div>
<div class="container image-price-section">
  <h2>üíá‚Äç‚ôÇÔ∏è Unsere Preisliste</h2>
  <img src="images/Barbershop-preisliste.png" alt="Aktuelle Preisliste">
</div>

<div class="container guestbook-section-custom">

    <div class="guestbook-header">
        <div class="logo-main">BARBERSHOP DELUXE</div>
        <div class="logo-sub">BLACK - GOLD EDITION</div>
        <div class="logo-line"></div>
    </div>


    <div class="guestbook-main-content">
        <div class="barber-pole left"></div>
        <div class="barber-pole right"></div>
        <i class="fas fa-cut scissors-drawing"></i>
        <i class="fas fa-solid fa-tooth comb-drawing"></i>
        <div class="barber-head-drawing left"></div>
        <div class="barber-head-drawing right"></div>

        <div class="guestbook-form-wrapper">
            <i class="fas fa-crown crown-icon"></i>
            <h3>G√ÑSTEBUCH</h3>
            <p class="slogan">Teile deine W√ºnsche mit</p>

            <form id="guestbookForm">
              <input type="text" id="guestName" placeholder="DEIN NAME" required>
              <textarea id="guestText" placeholder="DEINE NACHRICHT" required></textarea>

              <div class="star-rating">
                  <span data-rating="1"><i class="far fa-star"></i></span>
                  <span data-rating="2"><i class="far fa-star"></i></span>
                  <span data-rating="3"><i class="far fa-star"></i></span>
                  <span data-rating="4"><i class="far fa-star"></i></span>
                  <span data-rating="5"><i class="far fa-star"></i></span>
              </div>

              <button type="submit" class="submit-btn">EINTRAG ABSCHICKEN</button>
            </form>
            <p id="successMsg">‚úÖ Vielen Dank f√ºr Ihren Eintrag!</p>
        </div>
    </div>

    <div class="messages-overview">
        <h3>Nachrichten Von Unseren G√§sten</h3>
        <div class="messages-grid">
            </div>
    </div>
</div>

<div class="container opening-hours">
  <h2>üìç Kontakt</h2>
  <p>Bachgasse 68, 69502 Hemsbach</p>
  <p>üìû 0176 70794224</p>
  <div class="social-links">
    <a href="https://www.instagram.com/cd_barbershop_/" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram">
    </a>
  </div>
  <h3>√ñffnungszeiten</h3>
  <ul>
    <li><strong>Montag ‚Äì Freitag:</strong><br>09:00 ‚Äì 19:00 Uhr</li>
    <li><strong>Samstag:</strong><br>09:00 ‚Äì 18:00 Uhr</li>
    <li><strong>Sonntag:</strong><br>Geschlossen ‚õî</li>
  </ul>
  <p><a
href="https://www.google.com/maps/dir/?api=1&destination=Bachgasse+68,+69502+Hemsbach"
  target="_blank" style="color:var(--gold-light);">Route auf Google Maps
√∂ffnen</a></p>
</div>
<footer>
  ¬© 2025 C&D Barbershop | Black Edition
</footer>
<script>
// ‚úÖ AKTUALISIERTE GOOGLE-SCRIPT-URL
const sheetURL =
"https://script.google.com/macros/s/AKfycbzSBO9iha-NH0D4j3GfGjxsOdoko1AqwrEnM2ie-dy1zrfu2OtjNH4TvnZVIkWh0KDB/exec";

const form = document.getElementById("guestbookForm");
const successMsg = document.getElementById("successMsg");
let selectedRating = 0; // Globaler Wert f√ºr das ausgew√§hlte Rating

// --- Star Rating Funktionalit√§t ---
document.addEventListener('DOMContentLoaded', () => {
    const stars = document.querySelectorAll('.star-rating span');

    function updateStars(rating) {
        stars.forEach(s => {
            const icon = s.querySelector('i');
            // 'fas' f√ºr gef√ºllt (Gold), 'far' f√ºr leer (Grau)
            if (parseInt(s.dataset.rating) <= rating) {
                icon.classList.remove('far');
                icon.classList.add('fas');
            } else {
                icon.classList.remove('fas');
                icon.classList.add('far');
            }
        });
    }

    stars.forEach(star => {
        // Bei Klick: Setze das permanente Rating
        star.addEventListener('click', () => {
            selectedRating = parseInt(star.dataset.rating);
            updateStars(selectedRating);
        });

        // Bei Hover: Zeige das Hover-Rating
        star.addEventListener('mouseover', () => {
            const hoverRating = parseInt(star.dataset.rating);
            updateStars(hoverRating);
        });

        // Bei Mouse-Out: Kehre zum permanenten Rating zur√ºck
        star.addEventListener('mouseout', () => {
            updateStars(selectedRating);
        });
    });
});
// --- Ende Star Rating Funktionalit√§t ---


// --- Eintr√§ge laden (GET) ---
async function loadEntries(){
  try{
    const res=await fetch(sheetURL);
    const entries=await res.json();

    const dynamicMessagesGrid = document.querySelector('.messages-grid');
    if (dynamicMessagesGrid) {
        dynamicMessagesGrid.innerHTML = ''; // Vorherige Eintr√§ge l√∂schen

        if(!entries || !entries.length){
            dynamicMessagesGrid.innerHTML='<p style="text-align:center;color:#888; grid-column: 1 / -1;">Noch keine Eintr√§ge vorhanden.</p>';
            return;
        }

        // Eintr√§ge umkehren (neueste zuerst) und rendern
        dynamicMessagesGrid.innerHTML = entries.reverse().map(e=>{
        const entryRating = e.rating ? parseInt(e.rating) : 0;
        let starHtml = '';
        for (let i = 1; i <= 5; i++) {
            // Sterne f√ºllen basierend auf der Bewertung
            starHtml += `<i class="${i <= entryRating ? 'fas' : 'far'} fa-star"></i>`;
        }

        const d=new Date(e.date);
        // Datum formatieren
        const dateString=d.toLocaleString('de-DE',{day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit'});

        return `
            <div class="message-card">
                <div class="card-header">${e.name||'Anonym'}</div>
                <div class="card-info">${dateString}</div>
                <div class="card-stars">${starHtml}</div>
                <p>${e.text}</p>
            </div>
        `;
      }).join('');
    }

  }catch(err){
    console.error("Fehler beim Laden der Eintr√§ge:", err);
    const dynamicMessagesGrid = document.querySelector('.messages-grid');
    if (dynamicMessagesGrid) {
        dynamicMessagesGrid.innerHTML='<p style="text-align:center;color:red; grid-column: 1 / -1;">Fehler beim Laden der Eintr√§ge. √úberpr√ºfen Sie das Script-URL.</p>';
    }
  }
}
// --- Formular absenden (POST) ---
form.addEventListener("submit",async e=>{
  e.preventDefault();
  const name=document.getElementById("guestName").value.trim();
  const text=document.getElementById("guestText").value.trim();

  if(!name||!text||selectedRating === 0) {
      alert("Bitte f√ºllen Sie alle Felder aus und geben Sie eine Sterne-Bewertung ab!");
      return;
  }

  try{
    const data=new FormData();
    data.append("name",name);
    data.append("text",text);
    data.append("rating", selectedRating); // F√ºge die Bewertung hinzu

    const submitBtn = document.querySelector('.submit-btn');
    submitBtn.textContent = 'Wird gesendet...';
    submitBtn.disabled = true;

    await fetch(sheetURL,{method:"POST",body:data});

    // Zur√ºcksetzen nach erfolgreichem Senden
    form.reset();
    selectedRating = 0; // Rating zur√ºcksetzen
    document.querySelectorAll('.star-rating span i').forEach(icon => {
        icon.classList.remove('fas');
        icon.classList.add('far');
    });

    submitBtn.textContent = 'EINTRAG ABSCHICKEN';
    submitBtn.disabled = false;

    successMsg.style.display="block";
    setTimeout(()=>successMsg.style.display="none",3000);
    loadEntries(); // Neue Eintr√§ge laden
  }catch(err){
    console.error("Fehler beim Senden!", err);
    alert("Fehler beim Senden des Eintrags. Ist das Google Script korrekt?");
    document.querySelector('.submit-btn').textContent = 'EINTRAG ABSCHICKEN';
    document.querySelector('.submit-btn').disabled = false;
  }
});
document.addEventListener("DOMContentLoaded",loadEntries);
</script>
</body>
</html>
