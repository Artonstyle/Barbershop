<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Barbershop Deluxe – Gästebuch</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
/* ========================================================== */
/* BASIS & GLOBALE STYLES (BLACK & GOLD EDITION) */
/* ========================================================== */
:root {
  --brand:#c0392b;
  --brand-2:#ff6b61;
  --bg:#000000;
  --card:#0a0a0a;
  --surface:#050505;
  --text:#e6eef6;
  --muted:#9aa6b2;
  --glass:rgba(255,255,255,0.03);
  --max-width:1200px;
  --radius:10px;
  --gold: #FFD700;
  --gold-light: #fdd835;
  --gold-shadow: rgba(253, 216, 53, 0.4);
  font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
}
*{box-sizing:border-box}
html,body{height:100%}
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
.container{max-width:var(--max-width);margin:0 auto;padding:0 16px}
h2{text-align: center; margin-bottom: 30px; font-weight: 700; color: var(--gold-light); text-shadow: 0 0 15px var(--gold-shadow);} 

/* ========================================================== */
/* PREISLISTE (Beispielbereich) */
/* ========================================================== */
.image-price-section {
  padding: 30px 20px;
  background: var(--card);
  border-radius: 15px;
  max-width: 900px;
  margin: 40px auto;
  text-align: center;
  box-shadow: 0 10px 30px rgba(0,0,0,0.7), 0 0 20px var(--gold-shadow);
}
.image-price-section img {max-width: 500px; width: 90%; border-radius: 10px;}

/* ========================================================== */
/* GÄSTEBUCH (Black & Gold Pulsierend) */
/* ========================================================== */
@keyframes goldPulse {
  0% { opacity: 0.4; }
  50% { opacity: 0.8; }
  100% { opacity: 0.4; }
}
.guestbook-section-custom {
  background-image: url('https://raw.githubusercontent.com/Artonstyle/Barbershop/main/images/Gästebuch.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  position: relative;
  margin: 40px auto 0;
  max-width: 1200px;
  min-height: 750px;
  box-shadow: inset 0 0 0 100vw rgba(0, 0, 0, 0.7);
}
.guestbook-section-custom::before {
  content: "";
  position: absolute;
  inset: 0;
  background-image:
    repeating-linear-gradient(45deg, rgba(255,215,0,0.02) 0px, rgba(255,215,0,0.02) 2px, transparent 2px, transparent 20px),
    repeating-linear-gradient(-45deg, rgba(255,215,0,0.02) 0px, rgba(255,215,0,0.02) 2px, transparent 2px, transparent 20px);
  animation: goldPulse 5s ease-in-out infinite;
  z-index: 1;
  opacity: 0.8;
}
.guestbook-main-content {
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;
  inset: 0;
  z-index: 10;
}
.guestbook-form-wrapper {
  background: transparent;
  border: none;
  padding: 180px 40px 40px;
  max-width: 440px;
  height: 520px;
  text-align: center;
  position: relative;
  z-index: 10;
  transform: translateY(-20px);
}
.guestbook-form-wrapper input[type="text"],
.guestbook-form-wrapper textarea {
  width: 100%;
  padding: 15px 12px;
  margin-bottom: 25px;
  background: rgba(80, 80, 80, 0.9);
  border: none;
  border-radius: 5px;
  color: #fff;
  font-size: 16px;
}
.star-rating {
  font-size: 35px;
  margin: 0 0 35px;
  color: #888;
  cursor: pointer;
  text-align: center;
}
.star-rating i { transition: color 0.2s; }
.star-rating i.active { color: var(--gold-light); }
.submit-btn {
  background: linear-gradient(0deg, #CEB700, var(--gold));
  color: #000;
  font-weight: 700;
  border: none;
  border-radius: 30px;
  padding: 15px 50px;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.6), 0 0 20px var(--gold-shadow);
  width: 90%;
  max-width: 300px;
}
.submit-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.8), 0 0 35px rgba(255,215,0,0.6);
}

/* Nachrichtenanzeige */
.messages-overview { text-align:center; margin-top:60px; }
.messages-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(280px,1fr));
  gap:20px;
  padding:0 50px;
}
.message-card {
  background: var(--card);
  border: 1px solid rgba(255,215,0,0.3);
  border-left: 4px solid var(--gold-light);
  border-radius: 12px;
  padding: 20px;
  text-align: left;
  box-shadow: 0 0 15px rgba(255,215,0,0.1);
  transition: transform 0.2s ease, box-shadow 0.3s ease;
}
.message-card:hover { transform: translateY(-4px); box-shadow: 0 0 25px rgba(255,215,0,0.25); }
.message-card .card-header { font-weight:bold; color:var(--gold-light); margin-bottom:8px; }
.message-card .card-stars i { color: var(--gold-light); }
.message-card p { font-size:14px; color:var(--text); }

/* Responsive */
@media(max-width:768px){
  .guestbook-section-custom {
    background-image:none!important;
    background:var(--bg);
    min-height:auto;
    padding:40px 10px;
  }
  .guestbook-form-wrapper {
    background:var(--card);
    border:2px solid var(--gold);
    box-shadow:0 0 20px var(--gold-shadow);
    padding:20px;
    height:auto;
  }
}
</style>
</head>

<body>

<!-- ================================= -->
<!-- HEADER / PREISLISTE -->
<!-- ================================= -->
<section class="image-price-section">
  <h2>Unsere Preisliste</h2>
  <img src="https://raw.githubusercontent.com/Artonstyle/Barbershop/main/images/price.jpg" alt="Preisliste">
</section>

<!-- ================================= -->
<!-- GÄSTEBUCH -->
<!-- ================================= -->
<section class="guestbook-section-custom" id="guestbook">
  <div class="guestbook-main-content">
    <form id="guestbookForm" class="guestbook-form-wrapper">
      <input type="text" id="name" placeholder="Your Name" required>
      <textarea id="message" placeholder="Your Message" required></textarea>
      <div class="star-rating" id="starRating">
        <i class="fa-regular fa-star" data-value="1"></i>
        <i class="fa-regular fa-star" data-value="2"></i>
        <i class="fa-regular fa-star" data-value="3"></i>
        <i class="fa-regular fa-star" data-value="4"></i>
        <i class="fa-regular fa-star" data-value="5"></i>
      </div>
      <button type="submit" class="submit-btn">SUBMIT ENTRY</button>
    </form>
  </div>
</section>

<!-- ================================= -->
<!-- EINTRÄGE ANZEIGEN -->
<!-- ================================= -->
<section class="messages-overview">
  <h2>Letzte Einträge</h2>
  <div class="messages-grid" id="guestbookEntries"></div>
</section>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbzSBO9iha-NH0D4j3GfGjxsOdoko1AqwrEnM2ie-dy1zrfu2OtjNH4TvnZVIkWh0KDB/exec";

// Sternebewertung
let selectedRating = 0;
document.querySelectorAll("#starRating i").forEach(star => {
  star.addEventListener("click", () => {
    selectedRating = parseInt(star.getAttribute("data-value"));
    document.querySelectorAll("#starRating i").forEach(s => {
      s.classList.toggle("active", parseInt(s.getAttribute("data-value")) <= selectedRating);
      s.classList.toggle("fa-solid", parseInt(s.getAttribute("data-value")) <= selectedRating);
      s.classList.toggle("fa-regular", parseInt(s.getAttribute("data-value")) > selectedRating);
    });
  });
});

// Formular absenden
document.getElementById("guestbookForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const name = document.getElementById("name").value.trim();
  const message = document.getElementById("message").value.trim();

  if (!selectedRating) {
    alert("Bitte Bewertung mit Sternen auswählen ⭐");
    return;
  }

  const formData = new FormData();
  formData.append("name", name);
  formData.append("text", message);
  formData.append("bewertung", selectedRating);

  await fetch(scriptURL, { method: "POST", body: formData });
  document.getElementById("guestbookForm").reset();
  selectedRating = 0;
  loadEntries();
});

// Einträge laden
async function loadEntries() {
  const res = await fetch(scriptURL);
  const entries = await res.json();
  const container = document.getElementById("guestbookEntries");
  container.innerHTML = "";
  entries.reverse().forEach(entry => {
    const stars = "★".repeat(entry.bewertung || 0) + "☆".repeat(5 - (entry.bewertung || 0));
    container.innerHTML += `
      <div class="message-card">
        <div class="card-header">${entry.name}</div>
        <div class="card-stars">${stars}</div>
        <p>${entry.text}</p>
      </div>
    `;
  });
}
loadEntries();
</script>

</body>
</html>
