<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíà C&D Barbershop ‚Äì Black Edition</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
/* ------------------------------------------------------------------ */
/* ORIGINALER CSS-CODE */
/* ------------------------------------------------------------------ */

body { 
    font-family:'Poppins', sans-serif; 
    background-color:#000; 
    color:#fff; 
    margin:0; 
    padding:0; 
    perspective: 1200px; 
}
p { margin:0; }
.container { width:90%; max-width:1200px; margin:0 auto; padding:20px; }
h2 { text-align:center; margin-bottom:30px; font-weight:700; text-shadow:0 0 15px rgba(255,255,255,0.8); }

/* *************************************************************** */
/* BANNER FIX */
/* *************************************************************** */
.header-banner { 
    width:100%; 
    height: 300px; 
    overflow:hidden; 
    display:flex; 
    justify-content:center; 
    align-items:center; 
    position:relative; 
    background:#000; 
}
.header-banner img { 
    width: auto; 
    max-width: 100%; 
    max-height: 100%; 
    height: auto; 
    object-fit:contain; 
    filter:brightness(1.2) contrast(1.1); 
    border:none; 
}
/* 3D-Effekt auf Willkommens-Sektion */
.welcome-section { 
    text-align:center; 
    padding:30px 20px; 
    background:rgba(255,255,255,0.05); 
    backdrop-filter:blur(8px); 
    margin:0 auto 40px auto; 
    border-radius:15px; 
    box-shadow:0 10px 30px rgba(0,0,0,0.7), 0 0 25px rgba(255,255,255,0.2);
    max-width:900px; 
    transform: translateZ(-10px);
    transition: transform 0.5s ease-in-out;
}
.welcome-section:hover {
    transform: translateZ(5px); 
}

.welcome-section h1 { font-size:2em; margin-bottom:10px; text-shadow:0 0 20px rgba(255,255,255,0.8); color: #fff; }
.welcome-section p { font-size:1.1em; color:#ddd; line-height:1.6; }
.opening-hours { margin-top:20px; text-align:center; }
.opening-hours ul { list-style:none; padding:0; display:inline-block; text-align:left; color:#ddd; }
.opening-hours li { padding:5px 0; border-bottom:1px solid rgba(255,255,255,0.1); }
.opening-hours li strong { color:#fff; }
footer { text-align:center; padding:15px 0; background:#050505; color:#888; margin-top:50px; border-top:1px solid rgba(255,255,255,0.1); }
footer a { color:#fff; text-decoration:none; margin:0 10px; }
footer a:hover { text-decoration:underline; }
.social-links { margin-top:15px; }
.social-links a { display:inline-block; margin:0 8px; }
.social-links img { width:28px; height:28px; filter:brightness(1.2); transition:transform 0.3s ease; }
.social-links img:hover { transform:scale(1.2); filter:brightness(1.5); }

/* *************************************************************** */
/* NEUER CSS F√úR DAS PREISLISTEN-BILD */
/* *************************************************************** */
.image-price-section {
    text-align: center;
    padding: 20px 0;
    margin-bottom: 50px;
    background: rgba(255,255,255,0.03); 
    border-radius: 15px;
    box-shadow:0 10px 30px rgba(0,0,0,0.7), 0 0 25px rgba(255,255,255,0.2);
    transform: translateZ(-10px);
    transition: transform 0.5s ease-in-out;
}

.image-price-section:hover {
    transform: translateZ(5px);
}

.image-price-section img {
    max-width: 500px;
    width: 90%;
    height: auto;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(255,255,255,0.2);
    transition: transform 0.3s ease;
}

.image-price-section img:hover {
    transform: scale(1.01);
}

/* *************************************************************** */
/* CSS F√úR DAS G√ÑSTEBUCH */
/* *************************************************************** */
.guestbook-section {
    padding: 40px 20px;
    margin: 40px auto;
    background: rgba(255,255,255,0.05); 
    border-radius: 15px;
    box-shadow:0 10px 30px rgba(0,0,0,0.7), 0 0 25px rgba(255,255,255,0.2);
    transform: translateZ(-10px);
    transition: transform 0.5s ease-in-out;
    max-width: 700px;
}
.guestbook-section:hover {
    transform: translateZ(5px);
}

.guestbook-section label {
    display: block;
    margin-bottom: 5px;
    font-weight: 600;
    color: #fff;
}

.guestbook-section input[type="text"], 
.guestbook-section textarea {
    width: 100%;
    padding: 10px;
    margin-bottom: 20px;
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 8px;
    background: rgba(0,0,0,0.5);
    color: #fff;
    font-size: 1em;
    box-sizing: border-box;
    transition: border-color 0.3s;
}

.guestbook-section input[type="text"]:focus, 
.guestbook-section textarea:focus {
    border-color: #fdd835;
    outline: none;
}

.guestbook-section textarea {
    resize: vertical;
    min-height: 120px;
}

.guestbook-section button {
    display: block;
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 8px;
    background-color: #fdd835;
    color: #000;
    font-size: 1.1em;
    font-weight: 700;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.1s;
}

.guestbook-section button:hover {
    background-color: #ffeb3b;
    transform: translateY(-2px);
}

/* *************************************************************** */
/* MOBILE FIX (3D deaktivieren) */
/* *************************************************************** */
@media (max-width:768px) {
  .header-banner { height: 200px; box-shadow:none; border:none; }
  .header-banner img { max-width:100%; max-height:100%; filter:brightness(1.3) contrast(1.2); }
  .welcome-section, .welcome-section:hover,
  .image-price-section, .image-price-section:hover,
  .guestbook-section, .guestbook-section:hover { 
      transform: none !important;
      box-shadow: 0 0 20px rgba(255,255,255,0.3);
  }
  .image-price-section img {
      max-width: 100%;
      width: 100%;
  }
}
</style>
</head>
<body>

<div class="header-banner">
  <img src="https://raw.githubusercontent.com/Artonstyle/Barbershop/main/images/Barbershop-logo7.png" alt="C&D Barbershop Banner">
</div>

<div class="welcome-section">
  <h1>Willkommen bei C&D Barbershop</h1>
  <p>Sch√∂n, dass Sie hier sind! C&D Barbershop steht f√ºr Qualit√§t, Stil und Pers√∂nlichkeit. In einer modernen Atmosph√§re bieten wir individuelle Beratung, trendige Schnitte und hochwertige Pflege ‚Äì f√ºr Ihr perfektes Haar- und Bartgef√ºhl.</p>
</div>

<div class="container image-price-section">
  <h2>üíá‚Äç‚ôÇÔ∏è Unsere Preisliste</h2>
  <img src="images/Barbershop-preisliste.png" alt="Aktuelle Preisliste des C&D Barbershops">
</div>

<div class="container guestbook-section" id="guestbook">
  <h2>‚≠ê Ihr Feedback</h2>
  <p style="text-align: center; margin-bottom: 25px; color: #aaa;">
    Wir freuen uns √ºber Ihre Meinung und Ihren Besuch!
  </p>

  <form id="guestbookForm">
    <label for="guestName">Ihr Name:</label>
    <input type="text" id="guestName" name="name" required>

    <label for="guestText">Ihr Beitrag:</label>
    <textarea id="guestText" name="text" required></textarea>

    <button type="submit">Beitrag abschicken</button>
  </form>

  <p id="successMsg" style="display:none; color:#0f0; text-align:center; margin-top:15px;">
    ‚úÖ Vielen Dank f√ºr Ihren Eintrag!
  </p>

  <div id="guestEntries" style="margin-top:40px;"></div>
</div>

<div class="container opening-hours">
  <h2>üìç Kontakt</h2>
  <p>Bachgasse 68, 69502 Hemsbach</p>
  <p>üìû 0176 70794224</p>
  <div class="social-links">
    <a href="#" target="_blank" aria-label="Instagram">
      <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram Icon">
    </a>
  </div>
  <h3>√ñffnungszeiten</h3>
  <ul>
    <li><strong>Montag ‚Äì Freitag:</strong><br>09:00 ‚Äì 19:00 Uhr</li>
    <li><strong>Samstag:</strong><br>09:00 ‚Äì 18:00 Uhr</li>
    <li><strong>Sonntag:</strong><br>Geschlossen ‚õî</li>
  </ul>
  <p><a href="https://www.google.com/maps/dir/?api=1&destination=Bachgasse+68,+69502+Hemsbach" target="_blank" style="color:#fdd835; text-decoration:none;">Auf Google Maps anzeigen</a></p>
</div>

<footer>
  <div class="container">
    <p>¬© 2025 C&D Barbershop. Alle Rechte vorbehalten.</p>
    <p style="margin-top:5px;">
      <a href="#">Impressum</a> | <a href="#">Datenschutz</a>
    </p>
  </div>
</footer>

<script>
// ‚úÖ AKTUALISIERT: IHRE NEUESTE KORREKTE URL F√úR DIE 3-FELDER-LOGIK
const sheetURL = "https://script.google.com/macros/s/AKfycbx-MmXEQuTij8xhVIR5RUUN91EOH5bTM4QkjeVx5OQhg6cPFZmUZkT79jCWi-RITY-v/exec";

const guestEntriesDiv = document.getElementById('guestEntries');
const form = document.getElementById("guestbookForm");
const successMsg = document.getElementById("successMsg");

// === Eintr√§ge laden (GET) ===
async function loadEntries() {
  try {
    const res = await fetch(sheetURL);
    // Behandeln Sie leere Antworten
    if (res.status === 204 || res.headers.get('content-length') === '0') {
      guestEntriesDiv.innerHTML = '<p style="text-align: center; color: #888;">Noch keine Eintr√§ge vorhanden.</p>';
      return;
    }
    
    const entries = await res.json(); 

    if (entries && entries.length) {
      guestEntriesDiv.innerHTML = entries.reverse().map((e, index) => {
        
        // --- KORREKTUR F√úR DIE DATUMSANZEIGE (FORMAT: TT.MM.JJJJ, HH:MM) ---
        let rawDate = new Date(e.date);
        const formattedDate = rawDate.toLocaleString('de-DE', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit',
            hour: '2-digit',
            minute: '2-digit'
        });
        // ------------------------------------------------------------------
        
        return `
        <div style="
          border-left: 4px solid #fdd835;
          padding: 15px;
          margin-bottom: 20px;
          background: rgba(255,255,255,0.05);
          border-radius: 8px;
        ">
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <strong style="color:#fff;">${e.name || 'Anonym'}</strong>
            <span style="color:#888; font-size:0.9em;"> (${formattedDate})</span>
          </div>
          
          <p style="color:#ddd; margin-top:8px; font-style: italic;">"${e.text}"</p>
        </div>
        `;
      }).join('');
    } else {
      guestEntriesDiv.innerHTML = '<p style="text-align: center; color: #888;">Noch keine Eintr√§ge vorhanden.</p>';
    }
  } catch (error) {
    console.error("Fehler beim Laden der Eintr√§ge:", error);
    // Nur bei einem echten Fehler anzeigen
    guestEntriesDiv.innerHTML = '<p style="color: red; text-align: center;">Eintr√§ge konnten nicht geladen werden.</p>';
  }
}

// === Formular absenden (POST) ===
form.addEventListener("submit", async (e) => {
  e.preventDefault();
  
  successMsg.style.display = "none";
  
  const name = document.getElementById("guestName").value.trim();
  const text = document.getElementById("guestText").value.trim();
  
  if (!name || !text) return;

  try {
    // Sende nur Name und Text an das Google Script
    await fetch(sheetURL, {
      method: "POST",
      mode: "no-cors", 
      headers: { 
        "Content-Type": "application/json" 
      },
      body: JSON.stringify({ name, text }),
    });

    form.reset();
    successMsg.style.display = "block";
    
    // Nach 3 Sekunden die Meldung ausblenden und Eintr√§ge neu laden
    setTimeout(() => {
        successMsg.style.display = "none";
        loadEntries();
    }, 3000); 
    
  } catch (error) {
    console.error("Fehler beim Senden:", error);
    alert('Fehler beim Absenden des Beitrags.');
  }
});

// Seite starten ‚Üí Eintr√§ge laden
document.addEventListener('DOMContentLoaded', loadEntries);
</script>

</body>
</html>
